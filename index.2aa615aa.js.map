{"mappings":"iiBAAAA,EAAA,S,6ECAA,IAAAC,EAAAD,EAAA,S,2FAOME,EAAS,IAAI,EAAAC,EAAAC,SACfC,EAAY,GACVC,EAAOC,SAASC,cAAc,iBAC9BC,EAAQH,EAAKE,cAAe,SAC5BE,EAAOH,SAASC,cAAe,oBAC/BG,EAASJ,SAASC,cAAe,wBACjCI,EAAiB,IAAI,EAAAC,EAAAT,SAI3B,SAASU,EAAaC,GAIpB,GAHAC,QAAQC,IAAI,QAEEL,EAAeM,UAAUH,GAC1B,C,SACII,I,OAAAA,EAAfC,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAC,EAAoCC,EAAOC,G,IAEjCC,E,2FAAYC,EAAAC,SAASC,mBAAmBL,EAAOC,G,UAA/CC,EAAGI,EAAAC,KACTf,QAAQC,IAAIQ,GAEe,IAAvBC,EAAIM,QAAQC,OAAY,C,sBAC1B/B,EAAOgC,U,kBACAC,EAAAC,OAAOC,QAAS,iD,OAEzBC,EAAAlC,QAAQmC,gBAAgBb,EAAIM,SAC5BM,EAAAlC,QAAQoC,SAASf,IACjB,EAAAgB,EAAArC,SAAiBsB,EAAIM,QAAStB,GAC9BgC,IAEAxC,EAAOgC,UACPtB,EAAe+B,a,kDAEf3B,QAAQC,IAAGa,EAAAc,I,2DAjBoBC,MAAAC,KAAAC,U,WAACvB,EAAOC,GAA5BN,EAAoB0B,MAAAC,KAAAC,U,CAqBnCC,CAAqB3C,EAAWO,EAAeqC,Y,WA6BpCC,I,OAAAA,EAAf9B,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,EAAOC,G,IAEzBC,E,2FAAYC,EAAAC,SAASC,mBAAmBL,EAAOC,G,UAE1B,KAFrBC,EAAGI,EAAAC,MAEDC,QAAQC,OAAY,C,sBAC1B/B,EAAOgC,U,kBACAC,EAAAC,OAAOC,QAAS,iD,OAGzBzB,EAAeuC,WAAazB,EAAI0B,YAChCd,EAAAlC,QAAQmC,gBAAgBb,EAAIM,SAC5BM,EAAAlC,QAAQoC,SAASf,GAEjBd,EAAO0C,MAAMC,QAAW,QAExB,EAAAb,EAAArC,SAAiBsB,EAAIM,QAAStB,GAC9BgC,IAEAxC,EAAOgC,UACPtB,EAAe2C,WAAWC,UAAY,GAEtC5C,EAAe+B,a,6GArBQE,MAAAC,KAAAC,U,CA4B3B,SAASL,IACP,IAAMe,EAAsBlD,SAASmD,iBAAkB,gBAC1BC,MAAMC,KAAKH,GACnBI,KAAI,SAAA9C,GACR,4CAAXA,EAAE+C,MACJ/C,EAAE+C,IAAO,6J,IA1FfxD,EAAKyD,iBAAkB,UAgCvB,SAAkBC,GAKhB,GAJAA,EAAEC,iBAIgB,MAFlB5D,EAAY2D,EAAEE,cAAcC,SAASC,YAAY5C,MAAM6C,QAGrD,OAAOlC,EAAAC,OAAOkC,KAAM,oCAItBpE,EAAOqE,S,SAemB/C,EAAOC,GAApByB,EAAYL,MAAAC,KAAAC,U,CAbzByB,CAAanE,EAAW,GAExBO,EAAe2C,WAAWQ,iBAAiB,QAASjD,GAEpDL,EAAMsD,iBAAiB,UAAU,SAAAhD,GAC/BC,QAAQC,IAAIF,EAAE0D,OAAOjD,OACE,KAAnBT,EAAE0D,OAAOjD,QAGbkD,OAAOC,SAASC,KAAO,e,OCpE3B,IAAAC,EAAA7E,EAAA,SAGM8E,EAAY,IAAI,EAAAD,EAAAzE,SAAO,sBAAuB,CAClD2E,QAAS,CAACF,EAAAG,iBACVC,OAAO,YACPC,gBAAiB,CACfC,OAAQ,GACRC,SAAU,GAEZC,kBAAmB,UACnBC,gBAAgB,EAChBC,cAAe,EACfC,aAAc,GACdC,MAAK,EACLC,aAAc,EAGdC,YAAa,CAEX,IAAK,CACHJ,cAAe,KAIjB,IAAK,CACHA,cAAe,KAIjB,IAAK,CACHA,cAAe,GAGjB,IAAK,CACHA,cAAe,KAGjB,KAAM,CACJA,cAAe,QAQfK,EAAYrF,SAASC,cAAc,wBACnCqF,EAActF,SAASC,cAAc,wBAE3CkE,OAAOX,iBAAiB,UAAU,WAChC,IAAM+B,EAAiBpB,OAAOqB,YAE9BH,EAAUvC,MAAM2C,oBAAsB,GAAwBC,OAAJ,GAAjBH,EAAqB,K,IAIhED,EAAY9B,iBAAiB,SAAS,SAAShD,GAC7CA,EAAEkD,iBAEElD,EAAEmF,OAAS,EACbpB,EAAUqB,YACDpF,EAAEmF,OAAS,GACpBpB,EAAUsB,W,0BC/DdnG,EAAAD,EAAA,S,0BAAA,IAEMqG,EAAY9F,SAASC,cAAc,wBACnC8F,EAAe/F,SAASC,cAAc,qB,SAa7B+F,I,OAAAA,EAAfnF,EAAAnB,EAAA,CAAAmB,EAAAC,GAAAC,MAAA,SAAAC,EAA6BiF,G,IAEnBC,E,2FAAc9E,EAAAC,SAAS8E,iBAAiBF,G,OAAxCC,EAAK3E,EAAAC,KACXf,QAAQC,IAAIwF,EAAMzE,QAAQ,GAAG2E,KAC7BL,EAAa9C,UAAY,yHAKmCyC,OAArBQ,EAAMzE,QAAQ,GAAG2E,IAAI,sPAM5DL,EAAaM,UAAUC,IAAI,U,gDAE3B7F,QAAQC,IAAGa,EAAAc,I,0DAjBaC,MAAAC,KAAAC,U,CAX5BsD,EAAUtC,iBAAiB,SAAS,SAAAhD,GAG9BA,EAAE0D,SAAW1D,EAAEmD,eAGfnD,EAAE0D,OAAOqC,WAAWF,UAAUG,SAAS,wB,SAKhBP,GAAdD,EAAa1D,MAAAC,KAAAC,U,CAJxBiE,CAAcjG,EAAE0D,OAAOwC,QAAQT,G,IAyBnC9B,OAAOX,iBAAiB,WAAW,SAAAC,GACjC,GAAIsC,EAAaM,UAAUG,SAAS,UAAW,CAE5B,WAKH/C,EALNkD,OACJZ,EAAaM,UAAUO,OAAO,UAC9Bb,EAAa9C,UAAY,G,KAOjC8C,EAAavC,iBAAiB,SAAS,SAAAqD,GACrC,IAA4BrG,KAMTqG,GALXlD,gBAAkBnD,EAAE0D,SACxB6B,EAAaM,UAAUO,OAAO,UAC9Bb,EAAa9C,UAAY,G","sources":["src/index.js","src/js/searchQuery.js","src/js/top-slider.js","src/js/trailers.js"],"sourcesContent":["import './js/swiper';\nimport './js/closeModal';\nimport './js/loader';\nimport './js/storage';\nimport './js/serviseAPI';\nimport './js/onFirstRender';\nimport './js/modal_footer';\nimport './js/paginator';\n// import './js/btnUp';\n// import './js/queue';\nimport './js/searchQuery';\nimport './js/top-slider';\nimport './js/sliderMarkup';\nimport './js/modalMovie';\nimport './js/trailers';\nimport './js/modal_button_storage';\n// import './js/renderWatched';\n","import { apiMovie } from './serviseAPI';\nimport insertCardMarkup from './cardMarkup';\nimport storage from './storage';\nimport { Notify } from 'notiflix';\nimport Loader from './loader';\nimport Paginator from './paginator';\n\nconst loader = new Loader();\nlet userValue = '';\nconst form = document.querySelector('.header__form');\nconst input = form.querySelector(`input`);\nconst list = document.querySelector(`.home__container`);\nconst slider = document.querySelector(`.top-slider__section`);\nconst paginatorQuery = new Paginator();\n\nform.addEventListener(`submit`, onSearch);\n\nfunction getQueryData(e) {\n  console.log('here');\n  \n  let nowPage = paginatorQuery.getNumber(e);\n  if (nowPage) {\n    async function fetchByQueryFropmPag(value, page) {\n      try {\n        const res = await apiMovie.searchMovieByQuery(value, page);\n        console.log(page);\n\n        if (res.results.length === 0) {\n          loader.disable();\n          return Notify.failure(`Sorry, no movies were found for your search.`);\n        }\n        storage.saveCurrentPage(res.results);\n        storage.savePage(page);\n        insertCardMarkup(res.results, list);\n        ifPosterOfMovieIsNotFound();\n\n        loader.disable();\n        paginatorQuery.makeMarkup();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    fetchByQueryFropmPag(userValue, paginatorQuery.currentPage);\n  }\n}\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  userValue = e.currentTarget.elements.searchQuery.value.trim();\n\n  if (userValue === '') {\n    return Notify.info(`The input field cannot be empty!`);\n    return;\n  }\n\n  loader.enable();\n\n  fetchByQuery(userValue, 1);\n\n  paginatorQuery.pagination.addEventListener('click', getQueryData);\n\n  input.addEventListener('change', e => {\n    console.log(e.target.value);\n    if (e.target.value !== '') {\n      return;\n    }\n    window.location.href = './index.html';\n  });\n}\n\nasync function fetchByQuery(value, page) {\n  try {\n    const res = await apiMovie.searchMovieByQuery(value, page);\n\n    if (res.results.length === 0) {\n      loader.disable();\n      return Notify.failure(`Sorry, no movies were found for your search.`);\n    }\n\n    paginatorQuery.totalPages = res.total_pages;\n    storage.saveCurrentPage(res.results);\n    storage.savePage(page);\n\n    slider.style.display = `none`;\n\n    insertCardMarkup(res.results, list);\n    ifPosterOfMovieIsNotFound();\n\n    loader.disable();\n    paginatorQuery.pagination.innerHTML = '';\n\n    paginatorQuery.makeMarkup();\n  } catch (error) {\n    \n  }\n}\n\n// if poster of film is not found\nfunction ifPosterOfMovieIsNotFound() {\n  const filmPostersNodeList = document.querySelectorAll(`.film_poster`);\n  const massiveOfFilmPosters = Array.from(filmPostersNodeList);\n  massiveOfFilmPosters.map(e => {\n    if (e.src === `https://image.tmdb.org/t/p/originalnull`) {\n      e.src = `https://img.freepik.com/premium-vector/movie-neon-sign-bright-signboard-light-banner-movie-time-logo-neon-emblem-vector-illustration_191108-314.jpg?w=2000`;\n    }\n  });\n}\n\n","import Swiper, { EffectCoverflow } from \"swiper\";\nimport '../../node_modules/swiper/swiper.scss';\n\nconst topMovies = new Swiper('[data-swiper=\"top\"]', {\n  modules: [EffectCoverflow],\n  effect:'coverflow',\n  coverflowEffect: {\n    rotate: 40,\n    modifier: 1,\n  },\n  touchEventsTarget: 'wrapper',\n  centeredSlides: true,\n  slidesPerView: 1,\n  spaceBetween: 10,\n  loop:true,\n  initialSlide: 3,\n\n  // Responsive breakpoints\n  breakpoints: {\n    // when window width is >= 320px\n    320: {\n      slidesPerView: 1.5,\n\n    },\n    // when window width is >= 480px\n    480: {\n      slidesPerView: 2.5,\n  \n    },\n    // when window width is >= 640px\n    768: {\n      slidesPerView: 3,\n\n    },\n    928: {\n      slidesPerView: 3.5,\n\n    },\n    1280: {\n      slidesPerView: 4.5,\n\n    }\n  }\n});\n\n\n\nconst container = document.querySelector('.top-slider__section');\nconst sliderImage = document.querySelector('.top-slider__wrapper');\n\nwindow.addEventListener('scroll', () => {\n  const scrollPosition = window.pageYOffset;\n\n  container.style.backgroundPositionY = `${scrollPosition * 0.1}px`;\n});\n\n\nsliderImage.addEventListener('wheel', function(e) {\n  e.preventDefault();\n\n  if (e.deltaY < 0) {\n    topMovies.slidePrev();\n  } else if (e.deltaY > 0) {\n    topMovies.slideNext();\n  }\n});","import { apiMovie } from './serviseAPI';\n\nconst sliderBar = document.querySelector('.top-slider__wrapper');\nconst modalTrailer = document.querySelector('.overlay--trailer');\n\nsliderBar.addEventListener('click', e => {\n  //   console.log(e.target.parentNode.classList.contains('swiper-slide-active'));\n  //   //   //   console.log(sliderBar.children);\n  if (e.target === e.currentTarget) {\n    return;\n  }\n  if (e.target.parentNode.classList.contains('swiper-slide-active')) {\n    fetchTrailers(e.target.dataset.id);\n  }\n});\n\nasync function fetchTrailers(id) {\n  try {\n    const video = await apiMovie.fetchTrailerById(id);\n    console.log(video.results[0].key);\n    modalTrailer.innerHTML = `(\n    <iframe\n      class=\"iframe\"\n      width=\"560\"\n      height=\"315\"\n      src=\"https://www.youtube.com/embed/${video.results[0].key}?rel=0&showinfo=0&autoplay=1\"\n      title=\"YouTube video player\"\n      frameborder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n      allowfullscreen\n    ></iframe>`;\n    modalTrailer.classList.add('active');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nwindow.addEventListener('keydown', e => {\n  if (modalTrailer.classList.contains('active')) {\n    function handleKeyDown(e) {\n      if (e.code === 'Escape') {\n        modalTrailer.classList.remove('active');\n        modalTrailer.innerHTML = '';\n      }\n    }\n    handleKeyDown(e);\n  }\n});\n\nmodalTrailer.addEventListener('click', e => {\n  function handleClickTrailer(e) {\n    if (e.currentTarget === e.target) {\n      modalTrailer.classList.remove('active');\n      modalTrailer.innerHTML = '';\n    }\n  }\n  handleClickTrailer(e);\n});\n"],"names":["parcelRequire","$bpxeT","$ff188c0ba33da7b1$var$loader","$kvC6y","default","$ff188c0ba33da7b1$var$userValue","$ff188c0ba33da7b1$var$form","document","querySelector","$ff188c0ba33da7b1$var$input","$ff188c0ba33da7b1$var$list","$ff188c0ba33da7b1$var$slider","$ff188c0ba33da7b1$var$paginatorQuery","$cYjYj","$ff188c0ba33da7b1$var$getQueryData","e","console","log","getNumber","_fetchByQueryFropmPag","$parcel$interopDefault","$2TvXO","mark","_callee","value","page","res","$kqwSa","apiMovie","searchMovieByQuery","_ctx","sent","results","length","disable","$6JpON","Notify","failure","$jzQFI","saveCurrentPage","savePage","$7iFtI","$ff188c0ba33da7b1$var$ifPosterOfMovieIsNotFound","makeMarkup","t0","apply","this","arguments","fetchByQueryFropmPag","currentPage","$ff188c0ba33da7b1$var$_fetchByQuery","totalPages","total_pages","style","display","pagination","innerHTML","filmPostersNodeList","querySelectorAll","Array","from","map","src","addEventListener","e1","preventDefault","currentTarget","elements","searchQuery","trim","info","enable","$ff188c0ba33da7b1$var$fetchByQuery","target","window","location","href","$e1ad9","$1fcab0c1210d2bd3$var$topMovies","modules","EffectCoverflow","effect","coverflowEffect","rotate","modifier","touchEventsTarget","centeredSlides","slidesPerView","spaceBetween","loop","initialSlide","breakpoints","$1fcab0c1210d2bd3$var$container","$1fcab0c1210d2bd3$var$sliderImage","scrollPosition","pageYOffset","backgroundPositionY","concat","deltaY","slidePrev","slideNext","$7abb2422dddf44c8$var$sliderBar","$7abb2422dddf44c8$var$modalTrailer","$7abb2422dddf44c8$var$_fetchTrailers","id","video","fetchTrailerById","key","classList","add","parentNode","contains","$7abb2422dddf44c8$var$fetchTrailers","dataset","code","remove","e2"],"version":3,"file":"index.2aa615aa.js.map"}