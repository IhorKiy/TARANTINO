{"mappings":"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","sources":["src/index.js","src/js/searchQuery.js","src/js/top-slider.js","src/js/trailers.js"],"sourcesContent":["import './js/swiper';\nimport './js/closeModal';\nimport './js/loader';\nimport './js/storage';\nimport './js/serviseAPI';\nimport './js/onFirstRender';\nimport './js/modal_footer';\nimport './js/paginator';\n// import './js/btnUp';\n// import './js/queue';\nimport './js/searchQuery';\nimport './js/top-slider';\nimport './js/sliderMarkup';\nimport './js/modalMovie';\nimport './js/trailers';\nimport './js/modal_button_storage';\n// import './js/renderWatched';\n","import { apiMovie } from './serviseAPI';\nimport insertCardMarkup from './cardMarkup';\nimport storage from './storage';\nimport { Notify } from 'notiflix';\nimport Loader from './loader';\nimport Paginator from './paginator';\n\nconst loader = new Loader();\nlet userValue = '';\nconst form = document.querySelector('.header__form');\nconst input = form.querySelector(`input`);\nconst list = document.querySelector(`.home__container`);\nconst slider = document.querySelector(`.top-slider__section`);\nconst paginatorQuery = new Paginator();\n\nform.addEventListener(`submit`, onSearch);\n\nfunction getQueryData(e) {\n  console.log('here');\n  \n  let nowPage = paginatorQuery.getNumber(e);\n  if (nowPage) {\n    async function fetchByQueryFropmPag(value, page) {\n      try {\n        const res = await apiMovie.searchMovieByQuery(value, page);\n        console.log(page);\n\n        if (res.results.length === 0) {\n          loader.disable();\n          return Notify.failure(`Sorry, no movies were found for your search.`);\n        }\n        storage.saveCurrentPage(res.results);\n        storage.savePage(page);\n        insertCardMarkup(res.results, list);\n        ifPosterOfMovieIsNotFound();\n\n        loader.disable();\n        paginatorQuery.makeMarkup();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    fetchByQueryFropmPag(userValue, paginatorQuery.currentPage);\n  }\n}\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  userValue = e.currentTarget.elements.searchQuery.value.trim();\n\n  if (userValue === '') {\n    return Notify.info(`The input field cannot be empty!`);\n    return;\n  }\n\n  loader.enable();\n\n  fetchByQuery(userValue, 1);\n\n  paginatorQuery.pagination.addEventListener('click', getQueryData);\n\n  input.addEventListener('change', e => {\n    console.log(e.target.value);\n    if (e.target.value !== '') {\n      return;\n    }\n    window.location.href = './index.html';\n  });\n}\n\nasync function fetchByQuery(value, page) {\n  try {\n    const res = await apiMovie.searchMovieByQuery(value, page);\n\n    if (res.results.length === 0) {\n      loader.disable();\n      return Notify.failure(`Sorry, no movies were found for your search.`);\n    }\n\n    paginatorQuery.totalPages = res.total_pages;\n    storage.saveCurrentPage(res.results);\n    storage.savePage(page);\n\n    slider.style.display = `none`;\n\n    insertCardMarkup(res.results, list);\n    ifPosterOfMovieIsNotFound();\n\n    loader.disable();\n    paginatorQuery.pagination.innerHTML = '';\n\n    paginatorQuery.makeMarkup();\n  } catch (error) {\n    \n  }\n}\n\n// if poster of film is not found\nfunction ifPosterOfMovieIsNotFound() {\n  const filmPostersNodeList = document.querySelectorAll(`.film_poster`);\n  const massiveOfFilmPosters = Array.from(filmPostersNodeList);\n  massiveOfFilmPosters.map(e => {\n    if (e.src === `https://image.tmdb.org/t/p/originalnull`) {\n      e.src = `https://img.freepik.com/premium-vector/movie-neon-sign-bright-signboard-light-banner-movie-time-logo-neon-emblem-vector-illustration_191108-314.jpg?w=2000`;\n    }\n  });\n}\n\n","import Swiper, { EffectCoverflow } from \"swiper\";\nimport '../../node_modules/swiper/swiper.scss';\n\nconst topMovies = new Swiper('[data-swiper=\"top\"]', {\n  modules: [EffectCoverflow],\n  effect:'coverflow',\n  coverflowEffect: {\n    rotate: 40,\n    modifier: 1,\n  },\n  touchEventsTarget: 'wrapper',\n  centeredSlides: true,\n  slidesPerView: 1,\n  spaceBetween: 10,\n  loop:true,\n  initialSlide: 3,\n\n  // Responsive breakpoints\n  breakpoints: {\n    // when window width is >= 320px\n    320: {\n      slidesPerView: 1.5,\n\n    },\n    // when window width is >= 480px\n    480: {\n      slidesPerView: 2.5,\n  \n    },\n    // when window width is >= 640px\n    768: {\n      slidesPerView: 3,\n\n    },\n    928: {\n      slidesPerView: 3.5,\n\n    },\n    1280: {\n      slidesPerView: 4.5,\n\n    }\n  }\n});\n\n\n\nconst container = document.querySelector('.top-slider__section');\nconst sliderImage = document.querySelector('.top-slider__wrapper');\n\nwindow.addEventListener('scroll', () => {\n  const scrollPosition = window.pageYOffset;\n\n  container.style.backgroundPositionY = `${scrollPosition * 0.1}px`;\n});\n\n\nsliderImage.addEventListener('wheel', function(e) {\n  e.preventDefault();\n\n  if (e.deltaY < 0) {\n    topMovies.slidePrev();\n  } else if (e.deltaY > 0) {\n    topMovies.slideNext();\n  }\n});","import { apiMovie } from './serviseAPI';\n\nconst sliderBar = document.querySelector('.top-slider__wrapper');\nconst modalTrailer = document.querySelector('.overlay--trailer');\n\nsliderBar.addEventListener('click', e => {\n  //   console.log(e.target.parentNode.classList.contains('swiper-slide-active'));\n  //   //   //   console.log(sliderBar.children);\n  if (e.target === e.currentTarget) {\n    return;\n  }\n  if (e.target.parentNode.classList.contains('swiper-slide-active')) {\n    fetchTrailers(e.target.dataset.id);\n  }\n});\n\nasync function fetchTrailers(id) {\n  try {\n    const video = await apiMovie.fetchTrailerById(id);\n    console.log(video.results[0].key);\n    modalTrailer.innerHTML = `(\n    <iframe\n      class=\"iframe\"\n      width=\"560\"\n      height=\"315\"\n      src=\"https://www.youtube.com/embed/${video.results[0].key}?rel=0&showinfo=0&autoplay=1\"\n      title=\"YouTube video player\"\n      frameborder=\"0\"\n      allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n      allowfullscreen\n    ></iframe>`;\n    modalTrailer.classList.add('active');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nwindow.addEventListener('keydown', e => {\n  if (modalTrailer.classList.contains('active')) {\n    function handleKeyDown(e) {\n      if (e.code === 'Escape') {\n        modalTrailer.classList.remove('active');\n        modalTrailer.innerHTML = '';\n      }\n    }\n    handleKeyDown(e);\n  }\n});\n\nmodalTrailer.addEventListener('click', e => {\n  function handleClickTrailer(e) {\n    if (e.currentTarget === e.target) {\n      modalTrailer.classList.remove('active');\n      modalTrailer.innerHTML = '';\n    }\n  }\n  handleClickTrailer(e);\n});\n"],"names":["parcelRequire","$avbY9","$2364270202d9246c$var$loader","$gjiCh","default","$2364270202d9246c$var$userValue","$2364270202d9246c$var$form","document","querySelector","$2364270202d9246c$var$input","$2364270202d9246c$var$list","$2364270202d9246c$var$slider","$2364270202d9246c$var$paginatorQuery","$aWGU8","$2364270202d9246c$var$getQueryData","e","console","log","getNumber","async","value","page","res","apiMovie","searchMovieByQuery","results","length","disable","$7Y9D8","Notify","failure","$5uEKZ","saveCurrentPage","savePage","$eVqJU","$2364270202d9246c$var$ifPosterOfMovieIsNotFound","makeMarkup","error","fetchByQueryFropmPag","currentPage","filmPostersNodeList","querySelectorAll","Array","from","map","src","addEventListener","e1","preventDefault","currentTarget","elements","searchQuery","trim","info","enable","totalPages","total_pages","style","display","pagination","innerHTML","$2364270202d9246c$var$fetchByQuery","target","window","location","href","$iB56l","$dc2a65b606cd99f4$var$topMovies","modules","EffectCoverflow","effect","coverflowEffect","rotate","modifier","touchEventsTarget","centeredSlides","slidesPerView","spaceBetween","loop","initialSlide","breakpoints","$dc2a65b606cd99f4$var$container","$dc2a65b606cd99f4$var$sliderImage","scrollPosition","pageYOffset","backgroundPositionY","deltaY","slidePrev","slideNext","$ff26e1a57d3db400$var$sliderBar","$ff26e1a57d3db400$var$modalTrailer","parentNode","classList","contains","id","video","fetchTrailerById","key","add","$ff26e1a57d3db400$var$fetchTrailers","dataset","code","remove","e2"],"version":3,"file":"index.5efb5ff1.js.map"}